<section class="bg-half bg-light d-table w-100" id="home">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-12 text-center">
        <div class="page-next-level">
          <h2>{{ publication.title }}</h2>
          <ul class="list-unstyled mt-4">
            <li class="list-inline-item h6 user text-muted me-2">
              <!-- <i class="mdi mdi-account"></i> {{ data.user }} -->
            </li>
            <li class="list-inline-item h6 date text-muted">
              <i class="mdi mdi-calendar-check"></i>
              {{ publication.createdAt | date : "medium" }}
            </li>
          </ul>
          <div class="page-next">
            <nav aria-label="breadcrumb" class="d-inline-block">
              <ul class="breadcrumb bg-white rounded shadow mb-0">
                <li class="breadcrumb-item">
                  <a [routerLink]="['/blogs']">Blog</a>
                </li>
                <li class="breadcrumb-item active" aria-current="page">
                  Blog Detail
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
      <!--end col-->
    </div>
    <!--end row-->
  </div>
  <!--end container-->
</section>
<!--end section-->
<!-- Hero End -->

<!-- Shape Start -->
<div class="position-relative">
  <div class="shape overflow-hidden text-white">
    <svg viewBox="0 0 2880 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M0 48H1437.5H2880V0H2160C1442.5 52 720 0 720 0H0V48Z"
        fill="currentColor"
      ></path>
    </svg>
  </div>
</div>
<!--Shape End-->

<!-- Blog STart -->
<section class="section">
  <div class="container">
    <div class="row">
      <!-- BLog Start -->
      <div class="col-lg-12 col-md-12">
        <div class="card blog blog-detail border-0 shadow rounded">
          <img
            src="https://www.khov.com/blog/wp-content/uploads/2019/08/Ranch-Style-Home-at-K.-Hovnanians-Four-Seasons-at-Belle-Terre-1600x1024.jpg"
            class="img-fluid rounded-top"
            alt=""
          />
          <div class="card-body content">
            <h3>
              <i class="mdi mdi-tag text-primary me-1"></i
              ><a href="javscript:void(0)" class="text-primary">{{
                publication.title
              }}</a>
            </h3>
            <blockquote class="blockquote mt-3 p-3">
              <p class="text-muted mb-0 fst-italic">
                {{ publication.content }}
              </p>
            </blockquote>
            <div class="post-meta mt-3">
              <ul class="list-unstyled mb-0">
                <li class="list-inline-item me-2 mb-0">
                  <a
                    href="javascript:void(0)"
                    class="text-muted like"
                    (click)="react('Heart', publication.id)"
                  >
                    <i class="uil uil-heart me-1"></i>
                  </a>
                  <a
                    style="
                      text-decoration: none;
                      color: #8492a6;
                      cursor: pointer;
                    "
                    (click)="openModal(modalBasicContent, 'Heart')"
                  >
                    {{ heartCount }}</a
                  >
                </li>
                <li class="list-inline-item me-2 mb-0">
                  <a
                    href="javascript:void(0)"
                    class="text-muted like"
                    (click)="react('Like', publication.id)"
                  >
                    <i class="uil uil-thumbs-up me-1"></i>
                  </a>
                  <a
                    style="
                      text-decoration: none;
                      color: #8492a6;
                      cursor: pointer;
                    "
                    (click)="openModal(modalBasicContent, 'Like')"
                  >
                    {{ likeCount }}
                  </a>
                </li>
                <li class="list-inline-item me-2 mb-0">
                  <a
                    href="javascript:void(0)"
                    class="text-muted dislike"
                    (click)="react('Dislike', publication.id)"
                  >
                    <i class="uil uil-thumbs-down me-1"></i>
                  </a>
                  <a
                    style="
                      text-decoration: none;
                      color: #8492a6;
                      cursor: pointer;
                    "
                    (click)="openModal(modalBasicContent, 'Dislike')"
                  >
                    {{ dislikeCount }}
                  </a>
                </li>
                <!-- <li class="list-inline-item">
                  <a href="javascript:void(0)" class="text-muted comments"
                    ><i class="uil uil-comment me-1"></i>{{ commentCount }}</a
                  >
                </li> -->
              </ul>
            </div>
          </div>
        </div>

        <div class="card shadow rounded border-0 mt-4">
          <div class="card-body">
            <h5 class="card-title mb-0">
              <i class="uil uil-comment me-1"></i> Comments ({{
                commentCount
              }}):
            </h5>

            <ul
              class="media-list list-unstyled mb-0"
              *ngFor="let data of commentList"
            >
              <li class="mt-4">
                <div class="d-flex justify-content-between">
                  <div class="d-flex align-items-center">
                    <!-- <a class="pe-3" href="#">
                      <img
                        src="assets/images/client/01.jpg"
                        class="img-fluid avatar avatar-md-sm rounded-circle shadow"
                        alt="img"
                      />
                    </a> -->
                    <div class="commentor-detail">
                      <h6 class="mb-0">
                        <a
                          href="javascript:void(0)"
                          class="text-dark media-heading"
                          >{{ data.username }}</a
                        >
                      </h6>
                      <small class="text-muted">{{ data.createdAt }}</small>
                    </div>
                  </div>
                  <!-- <a class="text-muted"><i class="mdi mdi-reply"></i> Reply</a> -->
                </div>
                <div class="mt-3">
                  <p
                    class="text-muted fst-italic p-3 bg-light rounded d-flex justify-content-between"
                  >
                    " {{ data.content }} "

                    <a
                      style="cursor: pointer"
                      *ngIf="
                        data.userId == userId
                      "
                      (click)="deleteComment(data.id, publication.id)"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="18"
                        height="18"
                        viewBox="0 0 24 24"
                      >
                        <path
                          fill="currentColor"
                          d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12Z"
                        />
                      </svg>
                    </a>
                  </p>
                </div>
              </li>

              <!-- <li class="mt-4">
                <div class="d-flex justify-content-between">
                  <div class="d-flex align-items-center">
                    <a class="pe-3" href="#">
                      <img
                        src="assets/images/client/02.jpg"
                        class="img-fluid avatar avatar-md-sm rounded-circle shadow"
                        alt="img"
                      />
                    </a>
                    <div class="commentor-detail">
                      <h6 class="mb-0">
                        <a
                          href="javascript:void(0)"
                          class="media-heading text-dark"
                          >Tammy Camacho</a
                        >
                      </h6>
                      <small class="text-muted"
                        >15th August, 2019 at 05:44 pm</small
                      >
                    </div>
                  </div>
                  <a class="text-muted"><i class="mdi mdi-reply"></i> Reply</a>
                </div>
                <div class="mt-3">
                  <p class="text-muted fst-italic p-3 bg-light rounded">
                    " There are many variations of passages of Lorem Ipsum
                    available, but the majority have suffered alteration in some
                    form, by injected humour "
                  </p>
                </div>
              </li>

              <li class="mt-4">
                <div class="d-flex justify-content-between">
                  <div class="d-flex align-items-center">
                    <a class="pe-3" href="#">
                      <img
                        src="assets/images/client/03.jpg"
                        class="img-fluid avatar avatar-md-sm rounded-circle shadow"
                        alt="img"
                      />
                    </a>
                    <div class="commentor-detail">
                      <h6 class="mb-0">
                        <a
                          href="javascript:void(0)"
                          class="media-heading text-dark"
                          >Tammy Camacho</a
                        >
                      </h6>
                      <small class="text-muted"
                        >16th August, 2019 at 03:44 pm</small
                      >
                    </div>
                  </div>
                  <a class="text-muted"><i class="mdi mdi-reply"></i> Reply</a>
                </div>
                <div class="mt-3">
                  <p class="text-muted fst-italic p-3 bg-light rounded">
                    " There are many variations of passages of Lorem Ipsum
                    available, but the majority have suffered alteration in some
                    form, by injected humour "
                  </p>
                </div>

                <ul class="list-unstyled ps-4 ps-md-5 sub-comment">
                  <li class="mt-4">
                    <div class="d-flex justify-content-between">
                      <div class="d-flex align-items-center">
                        <a class="pe-3" href="#">
                          <img
                            src="assets/images/client/01.jpg"
                            class="img-fluid avatar avatar-md-sm rounded-circle shadow"
                            alt="img"
                          />
                        </a>
                        <div class="commentor-detail">
                          <h6 class="mb-0">
                            <a
                              href="javascript:void(0)"
                              class="text-dark media-heading"
                              >Lorenzo Peterson</a
                            >
                          </h6>
                          <small class="text-muted"
                            >17th August, 2019 at 01:25 pm</small
                          >
                        </div>
                      </div>
                      <a class="text-muted"
                        ><i class="mdi mdi-reply"></i> Reply</a
                      >
                    </div>
                    <div class="mt-3">
                      <p class="text-muted fst-italic p-3 bg-light rounded">
                        " There are many variations of passages of Lorem Ipsum
                        available, but the majority have suffered alteration in
                        some form, by injected humour "
                      </p>
                    </div>
                  </li>
                </ul>
              </li> -->
            </ul>
          </div>
        </div>

        <div class="card shadow rounded border-0 mt-4">
          <div class="card-body">
            <h5 class="card-title mb-0">Leave A Comment :</h5>
            <form
              class="mt-3"
              (submit)="createComment(commentContent, publication.id)"
            >
              <div class="row">
                <div class="col-md-12">
                  <div class="mb-3">
                    <label class="form-label">Your Comment</label>
                    <div class="form-icon position-relative">
                      <i-feather
                        name="message-circle"
                        class="fea icon-sm icons"
                      ></i-feather>
                      <textarea
                        id="message"
                        placeholder="Your Comment"
                        rows="5"
                        name="message"
                        class="form-control ps-5"
                        required=""
                        [(ngModel)]="commentContent"
                      ></textarea>
                    </div>
                  </div>
                </div>
                <!--end col-->

                <div class="col-md-12">
                  <div class="send d-grid">
                    <button type="submit" class="btn btn-primary">
                      Submit
                    </button>
                  </div>
                </div>
                <!--end col-->
              </div>
              <!--end row-->
            </form>
            <!--end form-->
          </div>
        </div>
      </div>
      <!-- BLog End -->

      <!-- END SIDEBAR -->
    </div>
    <!--end row-->
  </div>
  <!--end container-->
</section>
<!--end section-->
<!-- Blog End -->
<ng-template #modalBasicContent let-modal="">
  <div class="modal-header">
    <h4 class="modal-title text-secondary" id="modal-basic-title">
      Reactions Users List
    </h4>
    <button
      type="button"
      class="btn-close"
      aria-label="Close"
      (click)="modal.dismiss('Cross click')"
    ></button>
  </div>
  <div class="modal-body">
    <h5 class="text-primary">Selected Reaction : {{ selectedReactionType }}</h5>
    <ul
      *ngIf="selectedReactionType"
      style="list-style: none; font-size: 1.2rem"
    >
      <li *ngFor="let user of getReactionUsers(selectedReactionType)">
        <i class="mdi mdi-account text-primary"></i> {{ user.firstname }}
        {{ user.lastname }}
      </li>
    </ul>
  </div>
</ng-template>
